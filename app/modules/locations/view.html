
<div class="page">
  <h1>Locations for {{ locationsCtrl.user.password.email }}</h1>

    <form ng-submit="locationsCtrl.addLocation()">
      <input type="text" placeholder='Name this location' ng-model="locationsCtrl.newLocation.title">
      <input type="text" placeholder="street address" ng-model="locationsCtrl.newLocation.address">
      <input type="text" placeholder="city" ng-model="locationsCtrl.newLocation.city">
      <input type="text" placeholder="state" ng-model="locationsCtrl.newLocation.state">

      <input type="submit" value="Add Location">

      <button ng-click="locationsCtrl.logout()">Log Out</button>
    </form>

  <ul class="locationsList" ng-repeat="place in locationsCtrl.locations">
    <li>{{ place.address }}</li>
    <li>{{ place.city }}</li>
    <li>{{ place.state }}</li>
    <button ng-click="locationsCtrl.deleteLocation(place)">Delete</button>
  </ul>

<!-- <div ng-if='' -->
  <div class="locationsMap">
    <ui-gmap-google-map center='locationsCtrl.map.center' zoom='locationsCtrl.map.zoom'>
      <ui-gmap-markers models="locationsCtrl.markers" coords="'coords'"  fit="true" click="onClick" doCluster="true">
        <ui-gmap-windows show="show">
          <div ng-non-bindable>
            <ul class="locationWeather">
              <li><img class="weatherIcon" src="{{ icon }}" alt="{{ condition }}"></li>
              <li>{{ temp | number:0 }}Â°</li>
              <li>{{ condition }}</li>
            </ul>
            <ul class="locationInfo">
              <li>{{ name }}</li>
              <li>{{ address }}</li>
              <li>{{ city }},  {{ state }}</li>
            </ul>

          </div>
        </ui-gmap-windows>
      </ui-gmap-markers>


      <ui-gmap-marker ng-if="locationsCtrl.currentPosition" coords="locationsCtrl.currentPosition.coords" idKey="locationsCtrl.currentPosition.id" options="locationsCtrl.currentPosition.options">
        <ui-gmap-window>
          <div>
            {{ locationsCtrl.currentPosition.title }}
            {{locationsCtrl.currentPosition.image }}
            <!--TODO: fix image-->
            <img class="weatherIcon" ng-src="{{ locationsCtrl.currentPosition.image }}" alt="current weather">
            </div>
        </ui-gmap-window>

      </ui-gmap-marker>

    </ui-gmap-google-map>
  </div>
</div>
